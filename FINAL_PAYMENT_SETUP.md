# ุญู ููุงุฆู ููุดููุฉ ุงููุฏููุนุงุช ๐ง

## ๐จ ุงููุดููุฉ ุงูุญุงููุฉ:
ุนูุฏ ุฅุถุงูุฉ ุฏูุนุฉ ุฌุฏูุฏุฉ ูุธูุฑ ุฎุทุฃ **"ุญุฏุซ ุฎุทุฃ ูู ุฅุถุงูุฉ ุงูุฏูุนุฉ"** ูุฃู ุฌุฏูู ุงููุฏููุนุงุช ุบูุฑ ููุฌูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช Supabase.

## โ ุงูุญู ุงูููุงุฆู (ุฎุทูุชุงู ููุท):

### ุงูุฎุทูุฉ 1: ุชุดุบูู ุงูููุฏ ูู Supabase
1. **ุงุฐูุจ ุฅูู [Supabase Dashboard](https://supabase.com/dashboard)**
2. **ุงุฎุชุฑ ูุดุฑูุนู**
3. **ุงููุฑ ุนูู "SQL Editor" ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ**
4. **ุงููุฑ "New Query"**
5. **ุงูุณุฎ ูุงูุตู ูุฐุง ุงูููุฏ:**

```sql
-- ุฅูุดุงุก ุฌุฏูู ุงููุฏููุนุงุช
CREATE TABLE IF NOT EXISTS payments (
  id BIGSERIAL PRIMARY KEY,
  invoice_id VARCHAR(50) NOT NULL,
  merchant_id BIGINT NOT NULL,
  amount DECIMAL(12,2) NOT NULL CHECK (amount > 0),
  payment_method VARCHAR(20) DEFAULT 'ููุฏู' CHECK (payment_method IN ('ููุฏู', 'ุชุญููู ุจููู', 'ุดูู', 'ุจุทุงูุฉ ุงุฆุชูุงู')),
  payment_date DATE DEFAULT CURRENT_DATE,
  notes TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ุฅุถุงูุฉ Foreign Keys
ALTER TABLE payments 
ADD CONSTRAINT fk_payments_invoice 
FOREIGN KEY (invoice_id) REFERENCES invoices(id) ON DELETE CASCADE;

ALTER TABLE payments 
ADD CONSTRAINT fk_payments_merchant 
FOREIGN KEY (merchant_id) REFERENCES merchants(id) ON DELETE CASCADE;

-- ุฅุถุงูุฉ ุฃุนูุฏุฉ ููููุงุชูุฑ
ALTER TABLE invoices 
ADD COLUMN IF NOT EXISTS paid_amount DECIMAL(12,2) DEFAULT 0.00,
ADD COLUMN IF NOT EXISTS remaining_amount DECIMAL(12,2) DEFAULT 0.00;

-- ุชุญุฏูุซ ุงูููุงุชูุฑ ุงูููุฌูุฏุฉ
UPDATE invoices SET paid_amount = 0.00, remaining_amount = amount WHERE paid_amount IS NULL;

-- ุชูุนูู ุงูุฃูุงู
ALTER TABLE payments ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Allow all operations on payments" ON payments FOR ALL USING (true) WITH CHECK (true);
```

6. **ุงููุฑ "Run" ูุชุดุบูู ุงูููุฏ**
7. **ุชุฃูุฏ ูู ุธููุฑ ุฑุณุงูุฉ ูุฌุงุญ**

### ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ ุงููุธุงู
1. **ุงุฑุฌุน ููุชุทุจูู**
2. **ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุฅุญุตุงุฆูุงุช**
3. **ุงููุฑ ุฒุฑ "ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช"** (ููุชุฃูุฏ)
4. **ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ "ุฌุฏูู ุงููุฏููุนุงุช ููุฌูุฏ ุจุงููุนู!"**

## ๐ฏ ุงุฎุชุจุงุฑ ูุธุงู ุงูุฏูุน:

### 1. ุฃูุดุฆ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ:
- ุงุฐูุจ ุฅูู ุงูููุงุชูุฑ
- ุฃูุดุฆ ูุงุชูุฑุฉ ุจูุจูุบ 1000 ุฌ.ู
- ุณุชุธูุฑ: ุงููุฏููุน: 0 ุฌ.ูุ ุงููุชุจูู: 1000 ุฌ.ู

### 2. ุฃุถู ุฏูุนุฉ:
- ุงููุฑ ุฒุฑ "ุฅุถุงูุฉ ุฏูุนุฉ" ๐ณ
- ุฃุฏุฎู 400 ุฌ.ู
- ุงุฎุชุฑ "ููุฏู"
- ุงุญูุธ ุงูุฏูุนุฉ

### 3. ุชุญูู ูู ุงููุชูุฌุฉ:
- ุงูุญุงูุฉ: ูุฏููุนุฉ ุฌุฒุฆูุงู
- ุงููุฏููุน: 400 ุฌ.ู
- ุงููุชุจูู: 600 ุฌ.ู

### 4. ุฃููู ุงูุฏูุน:
- ุฃุถู ุฏูุนุฉ ุฃุฎุฑู 600 ุฌ.ู
- ุงูุญุงูุฉ: ูุฏููุนุฉ
- ุงููุชุจูู: 0 ุฌ.ู

## ๐ ุงูููุฒุงุช ุงูุฌุงูุฒุฉ ุจุนุฏ ุงูุฅุนุฏุงุฏ:

### โ ูู ุงูููุงุชูุฑ:
- ุฒุฑ "ุฅุถุงูุฉ ุฏูุนุฉ" ููููุงุชูุฑ ุบูุฑ ุงูููุชููุฉ
- ุนุฑุถ ุงููุจูุบ ุงููุฏููุน ูุงููุชุจูู
- ุญุงูุงุช: ูุฏููุนุฉุ ูุฏููุนุฉ ุฌุฒุฆูุงูุ ูุนููุฉ

### โ ูู ุชูุงุตูู ุงููุงุชูุฑุฉ:
- ููุฎุต ุงููุฏููุนุงุช
- ูุงุฆูุฉ ุงููุฏููุนุงุช ูุน ุงูุชูุงุฑูุฎ
- ุฅููุงููุฉ ุญุฐู ุงููุฏููุนุงุช ุงูุฎุงุทุฆุฉ

### โ ูู ุงูุฅุญุตุงุฆูุงุช:
- ุฅุฌูุงูู ุงููุฏููุน
- ุงููุชุจูู ููุชุญุตูู
- ุงููุฏููุนุงุช ุงูููุฏูุฉ
- ุญุงูุฉ ุงูููุงุชูุฑ

### โ ุทุฑู ุงูุฏูุน:
- ๐ต ููุฏู
- ๐ฆ ุชุญููู ุจููู
- ๐ ุดูู
- ๐ณ ุจุทุงูุฉ ุงุฆุชูุงู

## ๐ง ุทุฑููุฉ ุจุฏููุฉ (ุฅุฐุง ูู ุชุนูู ุงูุฃููู):

### ุงุณุชุฎุฏุงู ุฒุฑ ุงูุฅุนุฏุงุฏ ูู ุงูุชุทุจูู:
1. **ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุฅุญุตุงุฆูุงุช**
2. **ุงููุฑ ุฒุฑ "ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช"**
3. **ุฅุฐุง ุธูุฑุช ุฑุณุงูุฉ ุฎุทุฃุ ุณูุชู ูุณุฎ ุงูููุฏ ุชููุงุฆูุงู**
4. **ุงุฐูุจ ุฅูู Supabase SQL Editor ูุงูุตู ุงูููุฏ**
5. **ุดุบู ุงูููุฏ ูุงุฑุฌุน ููุชุทุจูู**

## ๐ ูููุงุช ูุณุงุนุฏุฉ:
- `CREATE_PAYMENTS_TABLE.sql` - ุงูููุฏ ุงููุงูู ููุฅุนุฏุงุฏ
- `QUICK_FIX_PAYMENTS.sql` - ูุณุฎุฉ ููุตูุฉ ูุน Triggers

## ๐ ุงููุชูุฌุฉ ุงููุชููุนุฉ:

ุจุนุฏ ุชุดุบูู ุงูููุฏ:
- โ **ูุง ูุฒูุฏ ูู ุฎุทุฃ "ุญุฏุซ ุฎุทุฃ ูู ุฅุถุงูุฉ ุงูุฏูุนุฉ"**
- โ **ูุธุงู ุฏูุน ูุชูุงูู ูุฌุงูุฒ**
- โ **ุชุญุฏูุซ ุชููุงุฆู ูููุจุงูุบ ูุงูุญุงูุงุช**
- โ **ุฅุญุตุงุฆูุงุช ุฏูููุฉ ููุญุฏุซุฉ**

## ๐ ูู ุญุงูุฉ ุงุณุชูุฑุงุฑ ุงููุดููุฉ:

1. **ุชุฃูุฏ ูู ุชุดุบูู ุงูููุฏ ูู Supabase ุจุฏูู ุฃุฎุทุงุก**
2. **ุชุฃูุฏ ูู ุฃู ุงููุดุฑูุน ุงูุตุญูุญ ููุชูุญ ูู Supabase**
3. **ุฃุนุฏ ุชุญููู ุงูุชุทุจูู (F5)**
4. **ุฌุฑุจ ุฅุถุงูุฉ ุฏูุนุฉ ูุฑุฉ ุฃุฎุฑู**

---

## ๐ ุฎุทูุงุช ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:

### ุฅุฐุง ุธูุฑ ุฎุทุฃ ูู Supabase:
- ุชุฃูุฏ ูู ูุฌูุฏ ุฌุฏุงูู `invoices` ู `merchants`
- ุชุฃูุฏ ูู ุฃู ุงูุฌุฏุงูู ุชุญุชูู ุนูู ุจูุงูุงุช
- ุฌุฑุจ ุชุดุบูู ุงูููุฏ ุฌุฒุก ุจุฌุฒุก

### ุฅุฐุง ูู ูุนูู ุฒุฑ "ุฅุถุงูุฉ ุฏูุนุฉ":
- ุงูุชุญ Developer Tools (F12)
- ุงูุธุฑ ูู Console ููุฃุฎุทุงุก
- ุชุฃูุฏ ูู ุฃู ุฌุฏูู `payments` ููุฌูุฏ

**ุจุนุฏ ุชุดุบูู ุงูููุฏุ ุงููุธุงู ุณูุนูู 100%!** ๐

---

**ููุงุญุธุฉ ูููุฉ:** ูุฐุง ุงูุญู ููุงุฆู ููุถููู. ููุท ุดุบู ุงูููุฏ ูู Supabase ูุณุชุญู ุงููุดููุฉ ุชูุงูุงู! โจ
