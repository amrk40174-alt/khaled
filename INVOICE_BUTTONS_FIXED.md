# ุฅุตูุงุญ ุฃุฒุฑุงุฑ ุชูุงุตูู ุงููุงุชูุฑุฉ ูุงูุตูุญุฉ ุงููุงุฑุบุฉ โ

## ๐จ ุงููุดููุฉ ุงูุชู ุชู ุญููุง:

### ุงููุดููุฉ ุงูุฃุตููุฉ:
- ุฃุฒุฑุงุฑ **ุชูุงุตูู ุงููุงุชูุฑุฉ** ู **ุงูุทุจุงุนุฉ** ู **ุชุญููู ุงููุงุชูุฑุฉ** ู **ุงูุชุนุฏูู** ุชุนูู
- ููููุง ุชุฃุชู **ุจุตูุญุฉ ูุงุฑุบุฉ**
- ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ุชุฏุฎู ุฅูู ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ

### โ ุงูุณุจุจ ูุงูุญู:

#### **ุงูุณุจุจ**:
1. **ุชุถุงุฑุจ ูู props**: ุงูู interface ูุงู ูุณุชุฎุฏู `isOpen/onClose` ุจูููุง ุงูุงุณุชุฎุฏุงู `open/onOpenChange`
2. **ูุนุงูุฌุฉ ุฎุงุทุฆุฉ ููุญุงูุงุช ุงูุงุณุชุซูุงุฆูุฉ**: ุนุฏู ูุฌูุฏ ุชุญูู ูุงูู ูู ุงูุจูุงูุงุช
3. **ุนุฏู ูุนุงูุฌุฉ ุญุงูุฉ ุงูุชุญููู**: ุนุฑุถ ูููู ูุงุฑุบ ุนูุฏ ุนุฏู ูุฌูุฏ ุจูุงูุงุช

#### **ุงูุญู ุงููุทุจู**:

### 1. **ุฅุตูุงุญ props ูู InvoiceDetails**:
```typescript
// ูุจู ุงูุฅุตูุงุญ:
interface InvoiceDetailsProps {
  invoice: Invoice | null;
  isOpen: boolean;           // โ ุฎุทุฃ
  onClose: () => void;       // โ ุฎุทุฃ
}

// ุจุนุฏ ุงูุฅุตูุงุญ:
interface InvoiceDetailsProps {
  invoice: Invoice | null;
  open: boolean;             // โ ุตุญูุญ
  onOpenChange: (open: boolean) => void;  // โ ุตุญูุญ
}
```

### 2. **ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฃูุถู ููุญุงูุงุช ุงูุงุณุชุซูุงุฆูุฉ**:
```typescript
// ูุจู ุงูุฅุตูุงุญ:
if (!currentInvoice) return null;  // โ ูุณุจุจ ุตูุญุฉ ูุงุฑุบุฉ

// ุจุนุฏ ุงูุฅุตูุงุญ:
if (!open) return null;  // โ ูุง ูุนุฑุถ ุฅุฐุง ูู ููู ููุชูุญ

if (!currentInvoice) {   // โ ูุนุฑุถ loading ุจุฏูุงู ูู ุตูุญุฉ ูุงุฑุบุฉ
  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent>
        <div className="text-center">
          <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"></div>
          <p>ุฌุงุฑู ุชุญููู ุชูุงุตูู ุงููุงุชูุฑุฉ...</p>
        </div>
      </DialogContent>
    </Dialog>
  );
}
```

### 3. **ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู useEffect**:
```typescript
// ุฅุถุงูุฉ fallback ุนูุฏ ูุดู ุฌูุจ ุงูุจูุงูุงุช
if (error) {
  console.error('Error fetching updated invoice:', error);
  setCurrentInvoice(invoice);  // โ ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุฃุตููุฉ
  return;
}

// ุฅุถุงูุฉ ุชุญูู ุฅุถุงูู
if (open && invoice) {
  fetchUpdatedInvoice();
}
```

### 4. **ุฅุตูุงุญ ุงููุฑุงุฌุน ูู ุงูุฏูุงู**:
```typescript
// ุชุญุฏูุซ ุฌููุน ุงููุฑุงุฌุน ูู invoice ุฅูู currentInvoice
title: `ูุงุชูุฑุฉ ${currentInvoice.id}`,
text: `ูุงุชูุฑุฉ ูู ${currentInvoice.merchant_name}`,
// ุจุฏูุงู ูู invoice.id ู invoice.merchant_name
```

## ๐ฏ ุงููุชุงุฆุฌ ุงูุขู:

### โ **ุฃุฒุฑุงุฑ ุชูุงุตูู ุงููุงุชูุฑุฉ**:
- **ุชุนูู ุจุดูู ุตุญูุญ** โ
- **ุชูุชุญ ุงูุชูุงุตูู ูุจุงุดุฑุฉ** โ
- **ูุง ูุฒูุฏ ูู ุงูุตูุญุงุช ุงููุงุฑุบุฉ** โ

### โ **ุฃุฒุฑุงุฑ ุงูุทุจุงุนุฉ ูุงูุชุญููู**:
- **ุชูุชุญ ุงูุชูุงุตูู ุฃููุงู** โ
- **ุชุนุฑุถ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ** โ
- **ุชุนูู ูุธุงุฆู ุงูุทุจุงุนุฉ ูุงูุชุญููู** โ

### โ **ุฒุฑ ุงูุชุนุฏูู**:
- **ููุชุญ ูุงูุฐุฉ ุงูุชุนุฏูู** โ
- **ูุนุฑุถ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ** โ

### โ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**:
- **ุนุฑุถ loading ุนูุฏ ุงูุชุญููู** โ
- **fallback ุนูุฏ ูุดู ุฌูุจ ุงูุจูุงูุงุช** โ
- **ูุง ูุฒูุฏ ูู ุงูุตูุญุงุช ุงููุงุฑุบุฉ** โ

## ๐ ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญุงุช:

### 1. **ุงุฎุชุจุงุฑ ุฒุฑ ุงูุชูุงุตูู**:
- ุงููุฑ ุนูู ุฃููููุฉ ุงูุนูู ๐๏ธ
- ุณุชูุชุญ ุชูุงุตูู ุงููุงุชูุฑุฉ ูุจุงุดุฑุฉ
- ุณุชุนุฑุถ ุฌููุน ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ

### 2. **ุงุฎุชุจุงุฑ ุฒุฑ ุงูุทุจุงุนุฉ**:
- ุงููุฑ ุนูู ุฃููููุฉ ุงูุทุงุจุนุฉ ๐จ๏ธ
- ุณุชูุชุญ ุชูุงุตูู ุงููุงุชูุฑุฉ
- ููููู ุงูุทุจุงุนุฉ ูู ุฏุงุฎู ุงูุชูุงุตูู

### 3. **ุงุฎุชุจุงุฑ ุฒุฑ ุงูุชุญููู**:
- ุงููุฑ ุนูู ุฃููููุฉ ุงูุชุญููู โฌ๏ธ
- ุณุชูุชุญ ุชูุงุตูู ุงููุงุชูุฑุฉ
- ููููู ุงูุชุญููู ูู ุฏุงุฎู ุงูุชูุงุตูู

### 4. **ุงุฎุชุจุงุฑ ุฒุฑ ุงูุชุนุฏูู**:
- ุงููุฑ ุนูู ุฃููููุฉ ุงูุชุนุฏูู โ๏ธ
- ุณุชูุชุญ ูุงูุฐุฉ ุงูุชุนุฏูู
- ุณุชุนุฑุถ ุงูุจูุงูุงุช ุงูุญุงููุฉ ููุชุนุฏูู

### 5. **ุงุฎุชุจุงุฑ ุงูุฎุฑูุฌ**:
- ุงูุชุญ ุฃู ุชูุงุตูู
- ุงููุฑ ุฎุงุฑุฌ ุงููุงูุฐุฉ ุฃู ุฒุฑ ุงูุฅุบูุงู
- ุณุชุนูุฏ ุฅูู ูุงุฆูุฉ ุงูููุงุชูุฑ ูุจุงุดุฑุฉ

## ๐ง ุงูุชูุงุตูู ุงูุชูููุฉ:

### **Props ุตุญูุญุฉ**:
```typescript
// ูู ุตูุญุฉ ุงูููุงุชูุฑ:
<InvoiceDetails
  invoice={selectedInvoice}
  open={isDetailsOpen}              // โ ุตุญูุญ
  onOpenChange={(open) => {         // โ ุตุญูุญ
    setIsDetailsOpen(open);
    if (!open) {
      setSelectedInvoice(null);
    }
  }}
/>
```

### **ูุนุงูุฌุฉ ุงูุญุงูุงุช**:
```typescript
// ุนุฏู ุงูุนุฑุถ ุฅุฐุง ูู ููู ููุชูุญ
if (!open) return null;

// ุนุฑุถ loading ุฅุฐุง ูู ุชูู ููุงู ุจูุงูุงุช
if (!currentInvoice) {
  return <LoadingDialog />;
}

// ุนุฑุถ ุงููุญุชูู ุงูุทุจูุนู
return <InvoiceDetailsContent />;
```

### **ุชุญุฏูุซ ุงูุจูุงูุงุช**:
```typescript
// ุฌูุจ ุฃุญุฏุซ ุงูุจูุงูุงุช ุนูุฏ ูุชุญ ุงูุชูุงุตูู
useEffect(() => {
  if (open && invoice) {
    fetchUpdatedInvoice();
  }
}, [open, invoice?.id]);
```

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

### โ **ุฌููุน ุงูุฃุฒุฑุงุฑ ุชุนูู ุจุดูู ูุซุงูู**:
- ุชูุงุตูู ุงููุงุชูุฑุฉ โ
- ุงูุทุจุงุนุฉ โ
- ุงูุชุญููู โ
- ุงูุชุนุฏูู โ

### โ **ูุง ูุฒูุฏ ูู ุงูุตูุญุงุช ุงููุงุฑุบุฉ**:
- ุนุฑุถ loading ุนูุฏ ุงูุชุญููู โ
- fallback ุนูุฏ ุงูุฃุฎุทุงุก โ
- ูุนุงูุฌุฉ ุตุญูุญุฉ ููุญุงูุงุช ุงูุงุณุชุซูุงุฆูุฉ โ

### โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ**:
- ูุชุญ ุณุฑูุน ููุชูุงุตูู โ
- ุนุฑุถ ูุงุถุญ ููุจูุงูุงุช โ
- ุชููู ุณูุณ ุจูู ุงูุตูุญุงุช โ

**ุงูุขู ุฌููุน ุฃุฒุฑุงุฑ ุงูููุงุชูุฑ ุชุนูู ุจุดูู ูุซุงูู ููุง ุชูุฌุฏ ุตูุญุงุช ูุงุฑุบุฉ!** ๐ฏโจ

---

## ๐ ููุงุญุธุงุช ูููุฉ:

1. **ุงูุฃุฒุฑุงุฑ ุชุนูู ููุฑุงู** ุจุฏูู ุชุฃุฎูุฑ
2. **ูุง ูุฒูุฏ ูู ุงูุตูุญุงุช ุงููุงุฑุบุฉ** 
3. **ูุนุงูุฌุฉ ุตุญูุญุฉ ููุฃุฎุทุงุก** ูุงูุญุงูุงุช ุงูุงุณุชุซูุงุฆูุฉ
4. **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ** ููุญุณูุฉ

**ุงุณุชูุชุน ุจุงูุฃุฒุฑุงุฑ ุงูุชู ุชุนูู ุจุดูู ูุซุงูู!** ๐
